<div class="main-wrapper">
  <div class="appointment-container py-5" style="margin-top: 80px;">
    <div class="text-center mb-4">
      <h2 class="text-dark fw-bold">
        <i class="fas fa-calendar-plus me-2 text-primary"></i>Agendar Nueva Cita
      </h2>
      <p class="text-muted">Completa el formulario para solicitar tu cita médica en Dermatech</p>
    </div>

    <div class="card appointment-card shadow-sm mx-auto border-0 rounded-4 overflow-hidden" style="max-width: 800px;">
      <div class="card-header bg-dark text-white text-center py-3 border-0">
        <h5 class="mb-0"><i class="fas fa-user-md me-2"></i>Formulario de Cita</h5>
      </div>
      
      <div class="card-body p-4 bg-white">
        <form [formGroup]="citaForm" (ngSubmit)="onSubmit()">
          
          <div class="section-title mb-4">
            <span class="text-primary fw-bold border-start border-primary border-3 ps-2">
              <i class="fas fa-user me-2"></i>Tus Datos
            </span>
          </div>

          <div class="row mb-4 bg-light p-3 rounded-3 mx-0">
            <div class="col-md-6 border-end">
              <p class="mb-1 small"><strong>Nombre:</strong> <span class="text-muted">{{usuarioInfo?.nombreCompleto || 'Cargando...'}}</span></p>
              <p class="mb-0 small"><strong>Email:</strong> <span class="text-muted">{{usuarioInfo?.email || '---'}}</span></p>
            </div>
            <div class="col-md-6 ps-md-4">
              <p class="mb-1 small"><strong>DNI:</strong> <span class="text-muted">{{usuarioInfo?.dni || '---'}}</span></p>
              <p class="mb-0 small"><strong>Teléfono:</strong> <span class="text-muted">{{usuarioInfo?.telefono || '---'}}</span></p>
            </div>
          </div>

          <div class="section-title mb-4">
            <span class="text-primary fw-bold border-start border-primary border-3 ps-2">
              <i class="fas fa-calendar-check me-2"></i>Datos de la Cita
            </span>
          </div>

          <div class="row g-3">
            <div class="col-md-6">
              <label class="form-label small fw-bold">Médico <span class="text-danger">*</span></label>
              <select class="form-select rounded-3" formControlName="idMedico">
                <option value="" disabled selected>Seleccione un médico</option>
                <option *ngFor="let medico of medicosActivos" [value]="medico.idMedico">
                  Dr. {{medico.nombreCompleto}} - {{medico.especialidad}}
                </option>
              </select>
              <div *ngIf="citaForm.get('idMedico')?.invalid && citaForm.get('idMedico')?.touched" class="text-danger small mt-1">
                Por favor, elige un especialista.
              </div>
            </div>

            <div class="col-md-6">
              <label class="form-label small fw-bold">Fecha y Hora <span class="text-danger">*</span></label>
              <input type="datetime-local" class="form-control rounded-3" formControlName="fechaHora">
              <div *ngIf="citaForm.get('fechaHora')?.invalid && citaForm.get('fechaHora')?.touched" class="text-danger small mt-1">
                La fecha y hora son obligatorias.
              </div>
            </div>

            <div class="col-12">
              <label class="form-label small fw-bold">Motivo de Consulta <span class="text-danger">*</span></label>
              <textarea class="form-control rounded-3" rows="2" formControlName="motivoConsulta" 
                        placeholder="Ej: Revisión de acné o control anual"></textarea>
              <div *ngIf="citaForm.get('motivoConsulta')?.invalid && citaForm.get('motivoConsulta')?.touched" class="text-danger small mt-1">
                El motivo debe tener al menos 5 caracteres.
              </div>
            </div>

            <div class="col-12">
              <label class="form-label small fw-bold">Observaciones adicionales (Opcional)</label>
              <textarea class="form-control rounded-3" rows="2" formControlName="observaciones" 
                        placeholder="Algún detalle extra para el doctor..."></textarea>
            </div>
          </div>

          <div class="d-flex justify-content-center mt-4">
            <button type="submit" class="btn btn-primary btn-lg rounded-pill px-5 shadow" 
                    [disabled]="citaForm.invalid || !usuarioInfo">
              <i class="fas fa-paper-plane me-2"></i>Solicitar Cita
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
<app-footer></app-footer>